\chapter{本科毕业论文开题报告}
%字数要求3500字以上
%课题意义、背景及可行性分析、调研报告、研究方案、实施计划、预期结果等

% my title: 数据命名网络中的P2P游戏同步 %
\def\tm{\leavevmode\hbox{$\rm {}^{TM}$}} %注册符 网上找的
%============================================================================%
\section{课题背景}
本课题处于数据命名网络、游戏设计和游戏同步协议的交叉背景之下，从一个与传统不同的角度探索游戏开发过程，分析游戏性能，继承和发展游戏同步机制。游戏同步协议一直以来都是备受关注的一个话题，因为它对大型多人在线网络游戏的交互性、一致性、可扩展性等性质具有深远的影响。数据命名网络是美国国家科学基金会未来因特网架构项目（NSF Future Internet Architecture）的四个子项目之一，着眼于通过改变网络中的通信方式、命名方式提升网络和基于网络的软件的性能。因此我们认为如果将游戏同步的问题放在数据命名网络的背景下考虑，同步效率可能得到进一步的提升，游戏质量也可能得到进一步改善。

%-------------------------------------------------------------------------------------------------------------------------------------%
\subsection{大型多人在线网络游戏}
大型多人在线网络游戏（Massively Multiplayer On-line Games, 简称~MMOG）自其诞生以来就受到普遍欢迎，并给其运营商带来巨大的经济效益。World of Warcraft\tm（魔兽世界\tm），Final Fantasy\tm（最终幻想\tm）和~Second Life\tm（第二人生\tm）等都是知名~MMOG~的例子。

随着网络技术的发展和游戏产业的壮大,运营商和游戏玩家对于游戏质量的要求也与日俱增。一方面，玩家希望得到更具交互性的游戏。他们希望游戏的响应时间更短、网络延时更小，并支持多种多样的交互方式。另一方面，玩家们又希望具有较高的一致性。无论网络速度如何，所有玩家得到的信息应该相同，这样才能保证游戏的公平性。殊不知，交互性与一致性这两项要求本身就是矛盾的。游戏运营商方面对游戏的要求则更加令人尴尬。首先，他们要求游戏具有很好的可扩展性。游戏的服务质量不能因为玩家数量的增多而显著下降。其次，网络中的通信量不能过多，要尽可能地节省带宽占用量。再次，像任何供应商一样，他们需要一个安全的网络模型。最后，游戏运营生还有一个特殊的需求，即防止玩家作弊。

MMOG~巨大的经济效益、发展需求和发展潜力使其在研究领域受到广泛重视。学者们从游戏架构、通信方式、通信协议等各个方面研究提升游戏质量的方法。

游戏同步协议的研究是~MMOG~研究领域的一个热门话题。~MMOG~与单人单机游戏的一个主要区别是它需要通过网络通信维护一个多人共享的虚拟世界，这就需要一个机制保证所有玩家看到的虚拟世界是一致的，或者说是不存在矛盾的。在很多情况下，为了维持这种一致性，必须使用专门的游戏同步机制。

%-------------------------------------------------------------------------------------------------------------------------------------%
\subsection{数据命名网络}

数据命名网络（Named Data Network, 简称~NDN）又称内容为心网络（Content Centric Network，简称~CCN），由~Van Jacobson~等在~\cite{Jndn}~中提出。~NDN~以内容作为网络中的第一原语，对内容命名，而不是像~IP~网络那样使用地址来描述一切。它可以同时提升网络的性能、可扩展性和安全性。~NDN~使用网络中的缓存来实现内容的重用，以此减少网络中的通信量。~NDN~使用一对一的流控制技术，提升了网络的可扩展性。~NDN~中所有数据均需要签名，通过保证数据的安全性来保证网络的安全性，而不是像~IP~网络那样通过保证主机和主机之间的链接的安全性去保证网络安全。

因为~NDN~具有诸多优秀的性质，我们很希望探索~NDN~会给游戏设计特别是游戏同步协议的设计带来怎样的影响。由于~NDN~处于网络层而游戏同步机制处于应用层，理论上在~IP~网络中研究的游戏同步协议都可以安全地移植到~NDN~上。这样~NDN~网络本身具有的低通信量、安全、可扩展等性质就可以使游戏软件直接受益。另外，~NDN~创新的数据命名方式和管理、传输方式有可能启发游戏开发人员创造出新的同步机制。

%============================================================================%
\section{目标、内容和意义}
\label{goals}
% 探索数据命名网络中游戏的实现方法
% 提供函数接口，便于游戏开发
% 探索游戏同步协议
% （1）将已有的同步协议运用于NDN游戏之中 -- 包括CCN自带的同步协议和文献中描述的经典同步算法
% （2）探究新的同步协议
% 探索成品游戏的网络性能（future work）

本课题最主要的目标是探索~NDN~网络上的游戏同步机制，并以样板游戏的方式实现这一机制。由于游戏同步问题并不是孤立存在的，它有许多其它游戏设计问题（如游戏架构、交互性、可扩展性、反作弊等问题）息息相关，所以我们在进行本课题的研究时也会综合考虑这些相关的方面，并给出这些问题在~NDN~上的解决方案。

总体而言，我们的研究目标包括以下内容：
\begin{itemize*}
\item 探索~NDN~中网络游戏实现的一般方法
  \begin{itemize*}
  \item 游戏应该采取何种架构
  \item 玩家与玩家之间、玩家与运营商之间的通信模式
  \end{itemize*}
\item 探索~NDN~与游戏制作软件的整合方式
  \begin{itemize*}
  \item 制作从~NDN~源代码到游戏制作软件的库函数接口
  \item 制作游戏引擎~Unity3D~可用的~NDN~插件
  \end{itemize*}
\item 探索~NDN~网络上的游戏同步协议
  \begin{itemize*}
  \item 学习如何使用~NDN~上现有的~CCNx Sync~协议\cite{CCNxSync}
  \item 学习如何将游戏同步领域的经典算法运用于~NDN~游戏
  \item 探索和设计新的游戏同步机制
  \end{itemize*}
\item 实现样本游戏
  \begin{itemize*}
  \item 制作一个在~NDN~上运行的多人在线网络游戏样本
  \end{itemize*}
\end{itemize*}

如果获得成功，我们的课题将具有以下意义。首先，更高效的同步算法将提升游戏的质量。当前影响游戏交互性的主要因素除了前端图形处理和渲染能力以外，就是由同步算法引进的延时。如果能降低由同步算法引入的延时，那么游戏的交互性就可以得到提升。其次，我们探索出的基于~NDN~的游戏设计方法将会提升游戏的可扩展性和安全性，使游戏运营商的服务能力增强，成本降低。再次，我们探索出的~NDN~游戏开发方法和样本程序将会成为未来的游戏开发者的经验。最后，我们在研究课题过程中产生的库函数、应用程序接口也可以被未来的程序开发者使用。

%============================================================================%
\section{可行性分析}
% 所有应用层协议理论上都可以应用于NDN 
% NDN中已经存在一个SYNC协议，只是速度够慢
% C 和 C# 之间可以互通
% Unity 可以用插件形式支持CCNx

我们在这一节中针对我们在~\ref{goals}~中提出的目标做出可行性分析。

为探究在~NDN~上实现游戏的一般方法，我们可以首先参考在~IP~网络中实现游戏的经验。游戏研究领域有许多文献探讨了游戏结构的分类与各个分类的特点~\cite{Ferretti2005, cr, p2p1, p2p2}。另外，除了参考文献中的游戏架构之外，我们还可以参考当今主流的~MMOG~所使用的架构~\cite{WoW, quake}。最后，~NDN~中已有一些应用软件的范例~\cite{Zact, Zhu2011, andana, vehicle, voccn}，这些软件的开发方式特别是网络通信方式也可以为我们所用。综上，我们将参考~NDN~中其它软件的开发方式，结合游戏领域的传统和开发习惯探索~NDN~网络游戏的开发流程。

网络层的内容和功能一般不会以源代码的形式直接提供给应用层的游戏开发者，而是要经过封装，专门给应用程序开发员提供一套简明易用的应用程序接口（API）。因此我们的研究目标中包括了开发一套可以供游戏开发人员重用的库函数这一项。~NDN~的源代码使用的是~C~语言和少量~Java~语言，为了方便游戏开发，我们希望使用一种更高级的语言对~C~源代码进行封装，提供一系列便于快速建模的接口。我们的行动依据有两个。第一，\verb|.Net Framework|~支持~C~和~C\#~之间的交互~\cite{interop}。第二，我们熟知的Unity3D{\tm}~游戏开发引擎可以以插件的形式支持JavaScript，C\# Script~和~C~语言的交互~\cite{plugin}。

我们的核心目标是探索~NDN~网络上的同步机制，为做到这一点我们首先需要学习~IP~网络上积累的同步经验~\cite{bryant, chandy, mimaze, hla, lockstep, fixed-bucket, Ferretti2005}。由于游戏同步协议属于应用层，而~NDN~属于网络层，所以传统~IP~网络中的协议均可以安全地移植到~NDN~上。基于这一点，我们至少可以选择一种最适合~NDN~的同步机制并将它实现。除此之外，~NDN~本身已经形成了一个通用的~CCNx Sync~协议~\cite{CCNxSync}。这个协议提供的是一种普适的同步服务，包括数据、文件的同步等等。从理论上来说此协议也可以用于游戏同步，只是时间效率过低，会严重影响游戏性能。因此我们希望从~CCNx Sync~协议出发，结合~IP~网络中已有的经验，探索~NDN~网络上更高效率的游戏同步方案。

为实现~\ref{goals}~中的目标，需要研究者具有一定游戏软件开发的经验，同时还需要掌握丰富的信息资源。UCLA REMAP\footnote{\url{http://remap.ucla.edu/}}~实验室和~IRL\footnote{\url{http://irl.cs.ucla.edu/index.html}}实验室将为我提供丰富的~NDN~资源和经验。Professor Jeffrey A. Burke, professor Lixia Zhang~将对我的课题进行指导。


%============================================================================%
\section{研究方案和关键技术考虑}
% 开发游戏使用Unity3D
% 技术难点？

我们的总体研究方案是以样本游戏的需求为例，研发其网络通信模块功能，在此过程中研究游戏架构、通信模式、同步、反作弊等设计问题。

课题研究初期我需要对~NDN~的基本原理和通信模式进行了解，这包括对文献和技术文档的阅读。随后我将尝试先用~CCNx Sync~实现简单的同步，并在尝试过程中积累、开发实用的~API。这个过程会涉及到大量~NDN~源程序的阅读工作。当我熟悉了~NDN~的原理和源程序并积累了一定量的库函数之后，就会着手开发样本游戏的网络模块。我需要参考~IP~网络既有的游戏设计和同步经验，结合~CCNx Sync，思索提高性能的可能性。最后，我会将设计好的同步方案在样本游戏中实现，并在这个过程中进一步完善函数库。

此项目中的关键之一是必须使用程序开发者普遍使用的游戏开发工具制作样本游戏。为此我们选择了Unity3D\tm~Pro引擎作为主要游戏开发工具。Unity3D\tm~在~2009~年被英国著名游戏开发者网站~Develop~列为全球排名前十的游戏引擎之一~\cite{unityrank}，至~2012~年已拥有超过~100~万注册开发人员~\cite{unityppl}。因此，我们决定使用使用~Unity\tm~制作样本游戏，并为其开发者制作库函数和插件。由于~Unity\tm~支持~\verb|.Net|~框架，我们为~Unity\tm~制作的函数库可以容易的被重用。

此项目中的关键之二是同步协议的选择。我们计划先使用~NDN~已有的~CCNx Sync~协议实现最简单的同步，然后修改和提升效率。我们所做的改进和设计的新同步协议将以函数库的形式发布，以插件的形式与游戏引擎整合，而不会与网络层的~NDN~源程序混为一体。

下面是我们在项目实现方面计划采用的软件和开发环境：
\begin{itemize*}
\item 游戏开发：Unity3D\tm~Pro
\item 开发环境：Mono\tm, Xcode\tm
\item 运行环境：MacOS\tm
\item 使用协议：CCNx Sync~\cite{CCNxSync}, CCNx CS~\cite{CCNxCS}, CCNx Repo~\cite{CCNxRepo}
\item 版本管理：GitHub\tm
\end{itemize*}


%============================================================================%
\section{预期研究结果}
% 游戏成品
% 库函数（接口）
% 新的同步协议，形成一篇论文
本课题的预期研究结果包括：
\begin{itemize*}
\item 一个在~NDN~中运行的~P2P~样板游戏
\item 一个支持~NDN~游戏同步的函数库
\item 一个支持~NDN~游戏同步的~Unity3D\tm~Pro~插件
\item 一个适用于~NDN~游戏的同步方案
\end{itemize*}








